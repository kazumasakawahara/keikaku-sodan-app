# テストチェックリスト

## 事前準備

1. サーバー起動
```bash
cd ~/Ai-Workspace/keikaku-sodan-app
source .venv/bin/activate
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

2. ブラウザで `http://localhost:8000` にアクセス

## テスト項目

### 1. ナビゲーションメニュー

- [ ] トップバーに「相談記録」メニューが表示される
- [ ] トップバーに「計画管理」メニューが表示される
- [ ] トップバーに「モニタリング」メニューが表示される
- [ ] 各メニューをクリックすると対応ページへ遷移する

### 2. 利用者管理

#### 編集機能
- [ ] 利用者一覧から詳細ページへ遷移
- [ ] 詳細ページの「編集」ボタンをクリック
- [ ] 編集フォームが表示される
- [ ] 既存データが正しく表示される
- [ ] データを変更して「保存」ボタンをクリック
- [ ] 成功メッセージが表示される
- [ ] 詳細ページへリダイレクトされる
- [ ] 変更内容が反映されている

#### 削除機能
- [ ] 利用者詳細ページの「削除」ボタンをクリック
- [ ] 確認ダイアログが表示される
- [ ] 「キャンセル」すると削除されない
- [ ] 「OK」すると削除される
- [ ] 成功メッセージが表示される
- [ ] 一覧ページへリダイレクトされる

### 3. 相談記録管理

#### 一覧表示
- [ ] メニューから「相談記録」をクリック
- [ ] 相談記録一覧が表示される
- [ ] 利用者名が表示される
- [ ] スタッフ名が表示される
- [ ] 相談日・相談形態・内容が表示される

#### フィルタリング
- [ ] 利用者ドロップダウンで絞り込み
- [ ] スタッフドロップダウンで絞り込み
- [ ] 「検索」ボタンで絞り込み実行

#### 新規作成
- [ ] 「新規相談記録」ボタンをクリック
- [ ] 新規作成フォームが表示される
- [ ] 利用者を選択
- [ ] スタッフを選択
- [ ] 相談日を入力（デフォルトは今日）
- [ ] 相談形態を選択
- [ ] 相談内容を入力
- [ ] 対応内容を入力（任意）
- [ ] 「登録」ボタンをクリック
- [ ] 成功メッセージが表示される
- [ ] 一覧ページへリダイレクトされる

#### 利用者詳細からの作成
- [ ] 利用者詳細ページへ移動
- [ ] 「新規記録」ボタンをクリック
- [ ] 新規作成フォームが開く
- [ ] 利用者が自動選択されている

#### 編集機能
- [ ] 一覧ページの「編集」ボタンをクリック
- [ ] 編集フォームが表示される
- [ ] 既存データが表示される
- [ ] 利用者名は表示のみ
- [ ] データを変更して「更新」ボタンをクリック
- [ ] 成功メッセージが表示される
- [ ] 一覧ページへリダイレクトされる

#### 削除機能
- [ ] 一覧ページの「削除」ボタンをクリック
- [ ] 確認ダイアログが表示される
- [ ] 「OK」で削除実行
- [ ] 成功メッセージが表示される
- [ ] 一覧が更新される

### 4. 計画管理

#### 編集機能
- [ ] 計画一覧から詳細ページへ移動
- [ ] 詳細ページに「編集」ボタンがある場合はクリック
  （または `/plans/{id}/edit` に直接アクセス）
- [ ] 編集フォームが表示される
- [ ] 承認済み計画の場合は警告が表示される
- [ ] 承認済み計画はフィールドが無効化される
- [ ] 未承認計画はフィールドが編集可能
- [ ] データを変更して「更新」ボタンをクリック
- [ ] 成功メッセージが表示される
- [ ] 詳細ページへリダイレクトされる

#### 利用者詳細からの作成
- [ ] 利用者詳細ページへ移動
- [ ] クイックアクションセクションの「新規計画作成」ボタンをクリック
- [ ] 計画作成フォームが開く（既存の create.html）

### 5. モニタリング管理

#### 編集機能
- [ ] モニタリング一覧から詳細ページへ移動
- [ ] 詳細ページに「編集」ボタンがある場合はクリック
  （または `/monitorings/{id}/edit` に直接アクセス）
- [ ] 編集フォームが表示される
- [ ] 利用者名・計画番号が表示される
- [ ] モニタリング種別を選択
- [ ] 各フィールドを入力
- [ ] 「計画変更が必要」チェックボックス
- [ ] 「更新」ボタンをクリック
- [ ] 成功メッセージが表示される
- [ ] 詳細ページへリダイレクトされる

#### 利用者詳細からの作成
- [ ] 利用者詳細ページへ移動
- [ ] クイックアクションセクションの「新規モニタリング作成」ボタンをクリック
- [ ] モニタリング作成フォームが開く（既存の create.html）

### 6. バリデーション

#### 必須項目
- [ ] 利用者編集で氏名を空にすると保存できない
- [ ] 相談記録で必須項目を空にすると登録できない
- [ ] 計画編集で必須項目を空にすると更新できない
- [ ] モニタリング編集で必須項目を空にすると更新できない

#### フォーマット
- [ ] 氏名（カナ）に全角カタカナ以外を入力するとエラー
- [ ] 郵便番号に不正なフォーマットを入力するとエラー
- [ ] メールアドレスに不正なフォーマットを入力するとエラー

### 7. エラーハンドリング

#### 存在しないIDへのアクセス
- [ ] `/users/99999/edit` にアクセス
- [ ] エラーメッセージが表示される
- [ ] 一覧ページへリダイレクトされる

#### ネットワークエラー
- [ ] サーバーを停止
- [ ] フォームを送信
- [ ] 「サーバーとの通信に失敗しました」というメッセージが表示される

### 8. UI/UX

#### レスポンシブデザイン
- [ ] PC表示で2カラムレイアウト
- [ ] タブレット表示で1カラムレイアウト
- [ ] スマートフォン表示でフルスクリーンフォーム

#### メッセージ表示
- [ ] 成功メッセージが画面上部中央に表示される
- [ ] メッセージは3秒後に自動的に消える
- [ ] 閉じるボタンで手動でも消せる

#### ボタン配置
- [ ] キャンセルボタンは左側
- [ ] 保存/更新ボタンは右側
- [ ] 削除ボタンは目立つ色（赤系）

### 9. セキュリティ

#### 認証チェック
- [ ] ログインせずにページにアクセスするとログインページへリダイレクト
- [ ] 編集・削除操作に認証が必要

## パフォーマンステスト（オプション）

- [ ] 100件以上のデータで一覧表示が高速
- [ ] 複数タブで同時編集しても問題ない
- [ ] ブラウザの戻るボタンで正常に動作

## ブラウザ互換性（オプション）

- [ ] Chrome
- [ ] Firefox
- [ ] Safari
- [ ] Edge

## 備考

### よくあるエラーと対処法

1. **テンプレートが見つからない**
   - ファイルパスが正しいか確認
   - サーバーを再起動

2. **APIエラー**
   - ブラウザのコンソールでエラー確認
   - ネットワークタブでリクエスト・レスポンス確認

3. **データが表示されない**
   - データベースに初期データがあるか確認
   - `python scripts/seed_data.py` でテストデータ投入

4. **認証エラー**
   - ログイン状態を確認
   - セッションが有効か確認

### デバッグ方法

```javascript
// ブラウザのコンソールで
console.log(await fetch('/api/users').then(r => r.json()));
```

```python
# サーバー側でログ出力
print(f"DEBUG: {variable}")
```
